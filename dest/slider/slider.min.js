!function(a){function b(a,b){this.slider=a,this.nextButton=null,this.prevButton=null,this.carousel=null,this.sliderNav=null,this.carouselType=b.carouselType,this.imgArr=b.imgArr,this.setting=b,this.timer=null,this.indicatorsType=b.indicatorsType,this.intervalTime=this.setting.intervalTime,this.animateTime=this.setting.animateTime,this.frameTime=this.setting.frameTime,this.AnimateCount=this.animateTime/this.frameTime,this.slideDeltaX=Math.floor(this.slider.width()/this.AnimateCount),this.liIndex=0,this.CarouselCount=this.imgArr.length,this.animateCounter=0,this.sliding=!1,this.pauseCommonSlide=!1,this.initialize()}b.prototype.update=function(a){function b(){clearInterval(c.timer),clearTimeout(c.timeout),delete c.timeout,delete c.timer,c.carousel.css("left",0),a.intervalTime&&(c.intervalTime=a.intervalTime),a.animateTime&&(c.animateTime=a.animateTime),a.frameTime&&(c.frameTime=a.frameTime),a.carouselType&&(c.carouselType=a.carouselType),"round"==a.indicatorsType?c.sliderNav.addClass("round"):"rectangle"==a.indicatorsType&&c.sliderNav.removeClass("round"),c.animateCounter=0,c.liIndex=0,c.sliding=!1,c.pauseCommonSlide=!1,c.sliderNav.find("li").removeClass("active"),c.sliderNav.find("li").eq(c.liIndex).addClass("active"),c.AnimateCount=c.animateTime/c.frameTime,c.slideDeltaX=Math.floor(c.slider.width()/c.AnimateCount),c.carouselRun()}var c=this;a=a||{},b()},b.prototype.destroy=function(){this.slider.empty(),clearInterval(this.timer),clearTimeout(this.timeout),delete this.timeout,delete this.timer,delete this.slider[0].sliderObj},b.prototype.initialize=function(){return this.crateModule().setDefaultStyle().registerEvent().carouselRun(),this},b.prototype.crateModule=function(){var b=this.imgArr,c=b.length;this.carousel=a("<ul class='carousel'></ul>"),this.sliderNav=a("<ul class='slider-nav'></ul>");for(var d=0;c>d;d++)this.carousel.append(a("<li><img src="+b[d]+" alt=''/></li>")),this.sliderNav.append(a("<li></li>"));return this.nextButton=a("<button class='slider-next'>&gt;</button>"),this.prevButton=a("<button class='slider-prev'>&lt;</button>"),this.slider.append(this.carousel).append(this.sliderNav).append(this.prevButton).append(this.nextButton),this},b.prototype.setDefaultStyle=function(){var a=this.carousel.find("li").length,b=this.indicatorsType||"rectangle";return this.carousel.css("width",100*a+"%"),this.carousel.find("li").css("width",100/a+"%"),this.sliderNav.find("li:first").addClass("active"),this.sliderNav.addClass(b),this},b.prototype.registerEvent=function(){var b=this;return this.slider.on("mouseenter",function(){a(this).find("button.slider-prev, button.slider-next").css("display","block"),clearTimeout(b.timeout),b.pauseCommonSlide=!0}),this.slider.on("mouseleave",function(){a(this).find("button.slider-prev, button.slider-next").css("display","none"),b.pauseCommonSlide=!1,0==b.animateCounter&&b.carouselRun()}),this.nextButton.on("click",function(){return b.sliding?!1:(clearTimeout(b.timeout),void b.next({direction:"left",type:"next",context:b}))}),this.prevButton.on("click",function(){return b.sliding?!1:(clearTimeout(b.timeout),void b.next({direction:"right",type:"prev",context:b}))}),this.sliderNav.find("li").each(function(c,d){a(d).on("click",function(){return b.sliding?!1:(clearTimeout(b.timeout),void b.fix(c))})}),window.onresize=function(){b.update()},this},b.prototype.carouselRun=function(){var a=this;return this.timeout=setTimeout(function(){return a.pauseCommonSlide?!1:void a.next({direction:"left",type:"common",context:a})},this.intervalTime),this},b.prototype.next=function(b){var c=b.context,d=c.carousel,e="left"==b.direction?-c.slideDeltaX:c.slideDeltaX;"left"==b.direction?(c.liIndex++,c.liIndex==c.CarouselCount&&(c.replaceImg=a("<img src='"+d.find("li").eq(c.CarouselCount-1).find("img").attr("src")+"'/>").css({position:"absolute",width:"100%",height:"100%",left:"0px",top:"0px"}),c.slider.append(c.replaceImg),d.css("left",d.find("li").width()),c.liIndex=0)):"right"==b.direction&&(c.liIndex--,-1==c.liIndex&&(c.replaceImg=a("<img src='"+d.find("li").eq(0).find("img").attr("src")+"'/>").css({position:"absolute",width:"100%",height:"100%",left:"0px",top:"0px"}),c.slider.append(c.replaceImg),d.css("left",-d.find("li").width()*c.CarouselCount)),c.liIndex=c.liIndex<=-1?c.CarouselCount-1:c.liIndex),c.sliding=!0,c.slideType=b.type,c.sliderNav.find("li").removeClass("active"),c.sliderNav.find("li").eq(c.liIndex).addClass("active"),c.timer=setInterval(function(){c.animateCounter++,c.animateCounter%c.AnimateCount==0?(d.css("left",-d.find("li").width()*c.liIndex),c.animateCounter=0,c.replaceImg&&c.replaceImg.remove(),clearInterval(c.timer),delete c.timer,delete c.timeout,delete c.replaceImg,c.sliding=!1,c.pauseCommonSlide||c.carouselRun()):(d.css("left",parseInt(d.css("left"))+e),c.replaceImg&&c.replaceImg.css("left",parseInt(c.replaceImg.css("left"))+e))},c.setting.frameTime)},b.prototype.multiNext=function(a){var b=a.context,c=b.carousel,d="left"==a.direction?-b.slideDeltaX:b.slideDeltaX,e=parseInt(c.css("left")),f=null,g=0,h=Math.abs(a.clickIndex-b.liIndex),i="multi"==b.carouselType?b.AnimateCount*h:b.AnimateCount;"single"==b.carouselType&&(f=b.carousel.find("img").eq(b.liIndex).clone(!0,!0),f.css({width:c.find("li").width(),height:c.find("li").height(),position:"absolute",top:"0px",left:"0px"}).appendTo(b.slider),"left"==a.direction?c.css("left",-(a.clickIndex-1)*c.find("li").width()):"right"==a.direction&&c.css("left",-(a.clickIndex+1)*c.find("li").width())),b.sliding=!0,b.liIndex=a.clickIndex,b.sliderNav.find("li").removeClass("active"),b.sliderNav.find("li").eq(b.liIndex).addClass("active"),b.timer=setInterval(function(){e=parseInt(c.css("left")),"single"==b.carouselType&&(g=parseInt(f.css("left"))),b.animateCounter++,b.animateCounter>=i?(c.css("left","left"==a.direction?-c.find("li").width()*b.liIndex:c.find("li").width()*b.liIndex),"single"==b.carouselType&&f.remove(),b.animateCounter=0,clearInterval(b.timer),delete b.timer,delete b.timeout,b.sliding=!1,b.pauseCommonSlide||b.carouselRun()):(c.css("left",e+d),"single"==b.carouselType&&f.css("left",g+d))},b.setting.frameTime)},b.prototype.fix=function(a){var b=(this.slider,this.carousel,a-this.liIndex>0?"next":a-this.liIndex==0?"static":"prev");return this.liIndex==a?!1:this.sliding?!1:1==Math.abs(this.liIndex-a)?(this.next({direction:this.liIndex-a==1?"right":"left",type:"prev",context:this}),!1):void(Math.abs(a-this.liIndex)>1&&this.multiNext({context:this,direction:"next"==b?"left":"right",type:"next"==b?"multiLeft":"multiRight",clickIndex:a}))},a.fn.extend({slider:function(){var a,c;return 2!=arguments.length||this[0].sliderObj?void(1==arguments.length&&"object"==typeof arguments[0]?this[0].sliderObj||(this[0].sliderObj=new b(this,arguments[0])):(c=arguments[0],a=arguments[1],this[0].sliderObj[c](a))):!1}})}(jQuery);