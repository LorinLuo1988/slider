!function(a){function b(a,b){this.slider=a,this.nextButton=null,this.prevButton=null,this.carousel=null,this.sliderNav=null,this.imgArr=b.imgArr,this.setting=b,this.timer=null,this.indicatorsType=b.indicatorsType,this.intervalTime=this.setting.intervalTime,this.animateTime=this.setting.animateTime,this.frameTime=this.setting.frameTime,this.AnimateCount=this.animateTime/this.frameTime,this.slideDeltaX=Math.floor(this.slider.width()/this.AnimateCount),this.liIndex=0,this.CarouselCount=this.imgArr.length,this.animateCounter=0,this.sliding=!1,this.pauseCommonSlide=!1,this.initialize()}b.prototype.update=function(a){function b(){a.intervalTime&&(c.intervalTime=a.intervalTime),a.animateTime&&(c.animateTime=a.animateTime),a.frameTime&&(c.frameTime=a.frameTime),"round"==a.indicatorsType?c.sliderNav.addClass("round"):"rectangle"==a.indicatorsType&&c.sliderNav.removeClass("round"),c.AnimateCount=c.animateTime/c.frameTime,c.slideDeltaX=Math.floor(c.slider.width()/c.AnimateCount)}var c=this;return a=a||{},this.sliding?(this.updateDelay=function(){b(),delete this.updateDelay},!1):void b()},b.prototype.initialize=function(){return this.crateModule().setDefaultStyle().registerEvent().carouselRun(),this},b.prototype.crateModule=function(){var b=this.imgArr,c=b.length;this.carousel=a("<ul class='carousel'></ul>"),this.sliderNav=a("<ul class='slider-nav'></ul>");for(var d=0;c>d;d++)this.carousel.append(a("<li><img src="+b[d]+" alt=''/></li>")),this.sliderNav.append(a("<li></li>"));return this.nextButton=a("<button class='slider-next'>&gt;</button>"),this.prevButton=a("<button class='slider-prev'>&lt;</button>"),this.slider.append(this.carousel).append(this.sliderNav).append(this.prevButton).append(this.nextButton),this},b.prototype.setDefaultStyle=function(){var a=this.carousel.find("li").length,b=this.indicatorsType||"rectangle";return this.carousel.css("width",100*a+"%"),this.carousel.find("li").css("width",100/a+"%"),this.sliderNav.find("li:first").addClass("active"),this.sliderNav.addClass(b),this},b.prototype.registerEvent=function(){var b=this;return this.slider.on("mouseenter",function(){a(this).find("button.slider-prev, button.slider-next").css("display","block"),clearTimeout(b.timeout),b.pauseCommonSlide=!0}),this.slider.on("mouseleave",function(){a(this).find("button.slider-prev, button.slider-next").css("display","none"),b.pauseCommonSlide=!1,0==b.animateCounter&&b.carouselRun()}),this.nextButton.on("click",function(){return b.sliding?!1:(clearTimeout(b.timeout),void b.next({direction:"left",type:"next",context:b}))}),this.prevButton.on("click",function(){return b.sliding?!1:(clearTimeout(b.timeout),void b.next({direction:"right",type:"prev",context:b}))}),this.sliderNav.find("li").each(function(c,d){a(d).on("click",function(){return b.sliding?!1:(clearTimeout(b.timeout),void b.fix(c))})}),window.onresize=function(){b.update()},this},b.prototype.carouselRun=function(a){var b=this;return this.timeout=setTimeout(function(){return b.pauseCommonSlide?!1:void b.next({direction:"left",type:"common",context:b})},this.intervalTime),this},b.prototype.next=function(a){var b=a.context,c=b.carousel,d="left"==a.direction?-b.slideDeltaX:b.slideDeltaX,e=0;if("left"==a.direction?(b.liIndex++,b.liIndex=b.liIndex>=b.CarouselCount?0:b.liIndex):"right"==a.direction&&(b.liIndex--,b.liIndex=b.liIndex<=-1?b.CarouselCount-1:b.liIndex),b.sliding=!0,b.slideType=a.type,b.sliderNav.find("li").removeClass("active"),b.sliderNav.find("li").eq(b.liIndex).addClass("active"),"right"==a.direction){var f=c.find("li:last"),g=f.clone(!0,!0).css("marginLeft",-f.width());f.remove(),c.prepend(g)}var h=c.find("li:first");b.timer=setInterval(function(){e=parseInt(h.css("marginLeft")),b.animateCounter++,b.animateCounter==b.AnimateCount?("left"==a.direction?(h.css({marginLeft:-h.width()}),g=h.clone(!0,!0).css("marginLeft","0px"),h.remove(),c.append(g)):"right"==a.direction&&h.css({marginLeft:"0px"}),b.animateCounter=0,clearInterval(b.timer),delete b.timer,delete b.timeout,b.sliding=!1,b.updateDelay&&b.updateDelay(),b.pauseCommonSlide||b.carouselRun()):h.css("marginLeft",e+d)},b.setting.frameTime)},b.prototype.multiNext=function(a){var b=a.context,c=b.carousel,d="left"==a.direction?-b.slideDeltaX:b.slideDeltaX,e=parseInt(c.css("left")),f=b.slider.children("img:first"),g=parseInt(f.css("left"));b.sliding=!0,b.liIndex=a.clickIndex,b.sliderNav.find("li").removeClass("active"),b.sliderNav.find("li").eq(b.liIndex).addClass("active"),b.timer=setInterval(function(){e=parseInt(c.css("left")),g=parseInt(f.css("left")),b.animateCounter++,b.animateCounter==b.AnimateCount?(f.css("left","left"==a.direction?-c.find("li").width():c.find("li").width()),c.css("left",0),f.remove(),b.animateCounter=0,clearInterval(b.timer),delete b.timer,delete b.timeout,b.sliding=!1,b.updateDelay&&b.updateDelay(),b.pauseCommonSlide||b.carouselRun()):(c.css("left",e+d),f.css("left",g+d))},b.setting.frameTime)},b.prototype.fix=function(a){var b=this.slider,c=this.carousel,d=a-this.liIndex>0?"next":a-this.liIndex==0?"static":"prev";if(this.liIndex==a)return!1;if(this.sliding)return!1;if(1==Math.abs(this.liIndex-a))return this.next({direction:this.liIndex-a==1?"right":"left",type:"prev",context:this}),!1;if(Math.abs(a-this.liIndex)>1){var e=c.find("li").eq(0).find("img").clone(!0,!0);e.css({width:c.find("li").width(),height:c.find("li").height(),position:"absolute",top:"0px",left:"0px"}).appendTo(b),c.css("left","next"==d?c.find("li").width():-c.find("li").width());var f=c.find("li").slice(0,a-this.liIndex).clone(!0,!0),g=c.find("li").slice(a-this.liIndex,this.CarouselCount).clone(!0,!0);c.find("li").remove().end().append(g).append(f),this.multiNext({context:this,direction:"next"==d?"left":"right",type:"next"==d?"multiLeft":"multiRight",clickIndex:a})}},a.fn.extend({slider:function(){var a,c;return 2!=arguments.length||this[0].sliderObj?(1==arguments.length?a=arguments[0]:2==arguments.length&&(c=arguments[0],a=arguments[1],this[0].sliderObj[c](a)),void(this[0].sliderObj||(this[0].sliderObj=new b(this,a)))):!1}})}(jQuery);