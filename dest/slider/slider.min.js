!function(a){function b(a,b){this.sliderContainer=a,this.nextButton=a.find("button.slider-next"),this.prevButton=a.find("button.slider-prev"),this.slider=a.find("ul.slider"),this.sliderNav=a.find("ul.slider-nav"),this.setting=b,this.timer=null,this.indicatorsType=b.indicatorsType,this.intervalTime=this.setting.intervalTime,this.animateTime=this.setting.animateTime,this.frameTime=this.setting.frameTime,this.AnimateCount=this.animateTime/this.frameTime,this.slideDeltaX=Math.floor(this.sliderContainer.width()/this.AnimateCount),this.liIndex=0,this.CarouselCount=this.slider.find("li").length,this.animateCounter=0,this.sliding=!1,this.pauseCommonSlide=!1,this.initialize()}b.prototype.update=function(a){return a=a||{},this.sliding?(this.updateDelay=function(){a.intervalTime&&(this.intervalTime=a.intervalTime),a.animateTime&&(this.animateTime=a.animateTime),a.frameTime&&(this.frameTime=a.frameTime),"round"==a.indicatorsType?this.sliderNav.addClass("round"):"rectangle"==a.indicatorsType&&this.sliderNav.removeClass("round"),this.AnimateCount=this.animateTime/this.frameTime,this.slideDeltaX=Math.floor(this.sliderContainer.width()/this.AnimateCount),delete this.updateDelay},!1):(a.intervalTime&&(this.intervalTime=a.intervalTime),a.animateTime&&(this.animateTime=a.animateTime),a.frameTime&&(this.frameTime=a.frameTime),"round"==a.indicatorsType?this.sliderNav.addClass("round"):"rectangle"==a.indicatorsType&&this.sliderNav.removeClass("round"),this.AnimateCount=this.animateTime/this.frameTime,void(this.slideDeltaX=Math.floor(this.sliderContainer.width()/this.AnimateCount)))},b.prototype.initialize=function(){return this.setDefaultStyle().registerEvent().carouselRun(),this},b.prototype.setDefaultStyle=function(){var a=this.sliderContainer,b=this.sliderContainer.find("ul.slider li").length;a.width(),a.height();return a.find("ul.slider").css({width:100*b+"%"}),a.find("ul.slider li").css({width:100/b+"%"}),"round"==this.indicatorsType?this.sliderNav.addClass("round"):"rectangle"==this.indicatorsType&&this.sliderNav.removeClass("round"),this},b.prototype.registerEvent=function(){var b=this;return this.sliderContainer.on("mouseenter",function(){a(this).find("button.slider-prev").css("display","block"),a(this).find("button.slider-next").css("display","block"),b.timeout&&clearTimeout(b.timeout),b.pauseCommonSlide=!0}),this.sliderContainer.on("mouseleave",function(){a(this).find("button.slider-prev").css("display","none"),a(this).find("button.slider-next").css("display","none"),b.pauseCommonSlide=!1,0==b.animateCounter&&b.carouselRun()}),this.nextButton.on("click",function(){return b.sliding?!1:(b.timeout&&clearTimeout(b.timeout),void b.next({direction:"left",type:"next",context:b}))}),this.prevButton.on("click",function(){return b.sliding?!1:(b.timeout&&clearTimeout(b.timeout),void b.next({direction:"right",type:"prev",context:b}))}),this.sliderNav.find("li").each(function(c,d){a(d).on("click",function(){return b.sliding?!1:(b.timeout&&clearTimeout(b.timeout),void b.fix(c))})}),window.onresize=function(){b.update()},this},b.prototype.carouselRun=function(a){var b=this;return this.timeout=setTimeout(function(){return b.pauseCommonSlide?!1:void b.next({direction:"left",type:"common",context:b})},this.intervalTime),this},b.prototype.next=function(a){function b(){var a=e.find("li:first");d.timer=setInterval(function(){h=parseInt(a.css("marginLeft")),d.animateCounter++,d.animateCounter==d.AnimateCount?(a.css({marginLeft:-a.width()}),g=a.clone(!0,!0).css("marginLeft","0px"),a.remove(),e.append(g),d.animateCounter=0,clearInterval(d.timer),delete d.timer,delete d.timeout,d.sliding=!1,d.updateDelay&&d.updateDelay(),d.pauseCommonSlide||d.carouselRun()):a.css({marginLeft:h+f})},d.setting.frameTime)}function c(){var a=e.find("li:last");g=a.clone(!0,!0).css("marginLeft",-a.width()),a.remove(),e.prepend(g);var b=e.find("li:first");d.timer=setInterval(function(){h=parseInt(b.css("marginLeft")),d.animateCounter++,d.animateCounter==d.AnimateCount?(b.css({marginLeft:"0px"}),d.animateCounter=0,clearInterval(d.timer),delete d.timer,delete d.timeout,d.sliding=!1,d.updateDelay&&d.updateDelay(),d.pauseCommonSlide||d.carouselRun()):b.css({marginLeft:h+f})},d.setting.frameTime)}var d=a.context,e=d.slider,f="left"==a.direction?-d.slideDeltaX:d.slideDeltaX,g=null,h=0;switch("left"==a.direction?(d.liIndex++,d.liIndex>=d.CarouselCount&&(d.liIndex=0)):"right"==a.direction&&(d.liIndex--,d.liIndex<=-1&&(d.liIndex=d.CarouselCount-1)),d.sliding=!0,d.slideType=a.type,d.sliderNav.find("li").removeClass("active"),d.sliderNav.find("li").eq(d.liIndex).addClass("active"),a.direction){case"left":b();break;case"right":c()}},b.prototype.multiNext=function(a){var b=a.context,c=b.slider,d="left"==a.direction?-b.slideDeltaX:b.slideDeltaX,e=parseInt(c.css("left")),f=b.sliderContainer.children("img:first"),g=parseInt(f.css("left"));b.sliding=!0,b.liIndex=a.clickIndex,b.sliderNav.find("li").removeClass("active"),b.sliderNav.find("li").eq(b.liIndex).addClass("active"),b.timer=setInterval(function(){e=parseInt(c.css("left")),g=parseInt(f.css("left")),b.animateCounter++,b.animateCounter==b.AnimateCount?(f.css({left:"left"==a.direction?-c.find("li").width():c.find("li").width()}),c.css({left:0}),f.remove(),b.animateCounter=0,clearInterval(b.timer),delete b.timer,delete b.timeout,b.sliding=!1,b.updateDelay&&b.updateDelay(),b.pauseCommonSlide||b.carouselRun()):(c.css({left:e+d}),f.css({left:g+d}))},b.setting.frameTime)},b.prototype.fix=function(a){var b=this.sliderContainer,c=this.slider,d=a-this.liIndex>0?"next":a-this.liIndex==0?"static":"prev";if(this.liIndex==a)return!1;if(this.sliding)return!1;if(this.liIndex-a==1)return this.next({direction:"right",type:"prev",context:this}),!1;if(this.liIndex-a==-1)return this.next({direction:"left",type:"next",context:this}),!1;if(Math.abs(a-this.liIndex)>1){var e=c.find("li").eq(0).find("img").clone(!0,!0);e.css({width:c.find("li").width(),height:c.find("li").height(),position:"absolute",top:"0px",left:"0px"}).appendTo(b),"next"==d?c.css("left",c.find("li").width()):"prev"==d&&c.css("left",-c.find("li").width());var f=c.find("li").slice(0,a-this.liIndex).clone(!0,!0),g=c.find("li").slice(a-this.liIndex,this.CarouselCount).clone(!0,!0);c.find("li").remove(),c.append(g).append(f),"next"==d?this.multiNext({context:this,direction:"left",type:"multiLeft",clickIndex:a}):"prev"==d&&this.multiNext({context:this,direction:"right",type:"multiRight",clickIndex:a})}},a.fn.extend({slider:function(){var a,c;return 2!=arguments.length||this[0].sliderObj?(1==arguments.length?a=arguments[0]:2==arguments.length&&(c=arguments[0],a=arguments[1],this[0].sliderObj[c](a)),void(this[0].sliderObj||(this[0].sliderObj=new b(this,a)))):!1}})}(jQuery);